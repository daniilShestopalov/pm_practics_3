# Use Case Group 1: Создание и запись путешествия

## Use Case 1: «Создать новую поездку»

### Use Case Description

**Участники (Actors):** Пользователь  
**Цель:** Инициировать новый дневник путешествия, задав его основную структуру и метаданные  

**Предусловия (Preconditions):**
- Пользователь авторизован в приложении
- Приложение имеет доступ к сети

**Основной поток (Main Success Scenario):**
1. Пользователь нажимает кнопку «+» или «Новая поездка» на главном экране
2. Система открывает форму создания поездки
3. Пользователь вводит название поездки
4. Пользователь выбирает даты начала и окончания поездки
5. Пользователь указывает основную страну и/или город назначения
6. Пользователь добавляет обложку
7. Пользователь нажимает «Сохранить»
8. Система создает и отображает каркас новой поездки в списке путешествий пользователя

**Альтернативные потоки (Alternate Flows):**
- **A. Пользователь решает заполнить информацию позже:** Пользователь может пропустить любой шаг, кроме названия. Система создает поездку с названием "Без названия" и текущей датой
- **B. Пользователь отменяет создание:** На любом шаге пользователь может нажать «Отмена». Система запрашивает подтверждение и, после согласия, удаляет все введенные данные и возвращает пользователя на главный экран

---

## Use Case 2: «Добавить точку маршрута»

### Use Case Description

**Участники (Actors):** Пользователь  
**Цель:** Детально зафиксировать впечатления о конкретном посещенном месте, привязав их к карте  

**Предусловия (Preconditions):**
- В приложении создана как минимум одна активная поездка
- Приложение имеет доступ к данным о местоположении (GPS) или сети Интернет (для поиска по карте)

**Основной поток (Main Success Scenario):**
1. Пользователь открывает существующую поездку
2. Пользователь нажимает кнопку «Добавить точку»
3. Система предлагает выбрать место на карте
4. Пользователь находит и выбирает место
5. Система автоматически заполняет название и координаты точки
6. Пользователь выбирает тип места из списка
7. Пользователь добавляет фотографии с камеры или из галереи
8. Пользователь пишет текстовые заметки о своих впечатлениях
9. Пользователь выставляет оценку
10. Пользователь нажимает «Сохранить»
11. Система добавляет точку в дневник и на карту маршрута

**Альтернативные потоки (Alternate Flows):**
- **A. Место не найдено в поиске:** Пользователь может вручную отметить точку на карте и ввести ее название вручную
- **B. Пользователь хочет добавить только фото:** Пользователь может добавить только фотографии, не заполняя текстовое описание. Система сохраняет точку с фото и геолокацией

---

## Use Case 3: «Записать дорожные впечатления»

### Use Case Description

**Участники (Actors):** Пользователь  
**Цель:** Быстро зафиксировать мысли и эмоции во время перемещения без привязки к конкретному месту  

**Предусловия (Preconditions):**
- В приложении создана как минимум одна активная поездка
- Для голосовой записи: приложение имеет доступ к микрофону

**Основной поток (Main Success Scenario):**
1. Пользователь открывает поездку
2. Пользователь нажимает кнопку «Быстрая запись»
3. Система открывает экран с кнопкой записи голоса и полем для текста
4. Пользователь нажимает и удерживает кнопку для записи голосового сообщения ИЛИ начинает печатать текст
5. Система автоматически добавляет временную метку и, если доступно, грубые координаты перемещения
6. Пользователь нажимает «Сохранить»
7. Система добавляет запись в ленту дневника как отдельный элемент с пометкой "В пути"

**Альтернативные потоки (Alternate Flows):**
- **A. Голосовая запись:** Пользователь записывает голосовое сообщение. Система сохраняет его как аудиофайл и, опционально, предлагает преобразовать в текст (через Speech-to-Text)
- **B. Отмена записи:** Пользователь отменяет действие, и система не сохраняет запись

---

## Use Case 4: «Импортировать и отметить фотографии»

### Use Case Description

**Участники (Actors):** Пользователь  
**Цель:** Упростить процесс иллюстрирования дневника, автоматически привязывая фотографии из галереи к точкам маршрута  

**Предусловия (Preconditions):**
- В приложении создана как минимум одна активная поездка
- Приложение имеет разрешение на доступ к медиатеке (галерее) устройства
- На устройстве есть фотографии, сделанные в период дат выбранной поездки

**Основной поток (Main Success Scenario):**
1. Пользователь в открытой поездке нажимает «Импорт фото»
2. Система запрашивает разрешение на доступ к медиатеке
3. Получив доступ, система показывает фотографии, сделанные в даты поездки, сгруппированные по дням и локациям
4. Пользователь просматривает предложенные фото и выбирает те, которые хочет добавить
5. Для фото с геотегами система автоматически предлагает привязать их к существующей точке маршрута или создать новую
6. Пользователь подтверждает выбор и привязку
7. Система загружает выбранные фотографии в дневник, привязывая их к соответствующим точкам или дням

**Альтернативные потоки (Alternate Flows):**
- **A. Фото без геотегов:** Пользователь может вручную перетащить такие фото на нужную точку на карте или в списке маршрута
- **B. Массовый импорт:** Пользователь выбирает целый день для импорта, и система создает "фотоподборку" за этот день, не привязывая к конкретным точкам

---

# Use Case Group 2: Организация и анализ своих путешествий

## Use Case 5: «Просмотреть путешествие на карте»

### Use Case Description

**Участники (Actors):** Пользователь
**Цель:** Увидеть географическую картину поездки в виде интерактивного маршрута.

**Предусловия (Preconditions):**
- Пользователь авторизован в приложении.
- В приложении существует как минимум одна поездка с добавленными точками маршрута.
  
**Основной поток (Main Success Scenario):**
1. Пользователь на главном экране выбирает поездку из списка.
2. Система открывает детали поездки (дневник).
3. Пользователь переходит на вкладку «Карта».
4. Система отображает интерактивную карту с линией маршрута, соединяющей все точки поездки в хронологическом порядке. Точки отмечены маркерами.
5. Пользователь кликает на маркер одной из точек.
6. Система отображает всплывающее окно (callout) с названием точки, датой и основной фотографией (если есть).
7. Пользователь кликает на всплывающее окно.
8. Система переходит к детальному просмотру этой точки маршрута.

**Альтернативные потоки (Alternate Flows):**
- **A.Просмотр без хронологического маршрута:** Если точки не имеют строгой временной привязки, система отображает их на карте без соединения линией, но в границах одной поездки.
- **B.Фильтрация точек:** Пользователь может отфильтровать точки на карте по типу (музеи, кафе и т.д.). Система скрывает несоответствующие фильтру точки и перерисовывает маршрут.
  
---

## Use Case 6: «Редактировать и структурировать дневник»

### Use Case Description

**Участники (Actors):** Пользователь
**Цель:** Привести дневник в логичный и удобочитаемый вид.

**Предусловия (Preconditions):**
- Пользователь авторизован в приложении.
- В приложении существует как минимум одна поездка с записями.
  
**Основной поток (Main Success Scenario):**
1. Пользователь открывает существующую поездку.
2. Пользователь нажимает кнопку «Редактировать дневник».
3. Система переходит в режим редактирования, где элементы дневника (записи, точки, фото) можно изменять.
4. Пользователь изменяет структуру (например, перетаскивает запись в другой день) или содержимое (редактирует текст, меняет/удаляет фотографии).
5. Пользователь нажимает «Сохранить изменения».
6. Система применяет все изменения и выходит из режима редактирования, отображая обновленный дневник.
   
**Альтернативные потоки (Alternate Flows):**
- **A. Объединение записей по темам:** Пользователь может создавать пользовательские разделы (например, «Лучшие рестораны», «Прогулки по паркам») и перемещать в них записи из разных дней.
- **B. Редактирование текста:** Пользователь нажимает на текстовый блок. Система открывает расширенный текстовый редактор с возможностью форматирования. Изменения сохраняются автоматически или по подтверждению.
- **C. Удаление элемента:** Пользователь свайпает элемент влево или нажимает на значок корзины. Система запрашивает подтверждение удаления, после чего удаляет элемент.
  
---

## Use Case 7: «Получить статистику путешествий»

### Use Case Description

**Участники (Actors):** Пользователь
**Цель:** Проанализировать свои travel-привычки и достижения.

**Предусловия (Preconditions):**
- Пользователь авторизован в приложении.
- В приложении существует как минимум одна завершенная поездка.
  
**Основной поток (Main Success Scenario):**
1. Пользователь переходит в раздел «Статистика» из главного меню.
2. Система загружает и отображает сводную аналитику по всем поездкам пользователя.
3. Пользователь просматривает данные:
4. Количество посещенных стран и городов.
5. Пройденный километраж (на основе данных маршрута).
6. Диаграмму самых популярных типов мест.
7. Интерактивную карту мира с закрашенными посещенными странами.
8. Пользователь может выбрать фильтр «За год» или «За все время» для уточнения данных.
   
**Альтернативные потоки (Alternate Flows):**
- **A.Детализация по стране:** Пользователь кликает на страну на карте статистики. Система показывает список всех поездок в эту страну и детальную статистику по ней (количество визитов, посещенные города, любимые типы мест).
- **B.Отсутствие данных для расчета:** Если для расчета километража недостаточно данных (например, точки не соединены маршрутом), система отображает этот показатель как «Недостаточно данных» или скрывает его.
  
---

## Use Case 8: «Найти информацию в архиве»

### Use Case Description

**Участники (Actors):** Пользователь
**Цель:** Быстро найти конкретную информацию из прошлых поездок.

**Предусловия (Preconditions):**
- Пользователь авторизован в приложении.
- В приложении существует архив из нескольких поездок с записями.

**Основной поток (Main Success Scenario):**
1. Пользователь на главном экране или в любом разделе приложения нажимает на строку поиска (лупу).
2. Система открывает экран расширенного поиска.
3. Пользователь вводит поисковый запрос (например, «отель в Праге с большим окном»).
4. Система в реальном времени ищет по всем текстовым данным пользователя (названия точек, заметки, названия поездок) и отображает результаты.
5. Пользователь просматривает список результатов, где каждый элемент показывает отрывок текста, название поездки и дату.
6. Пользователь кликает на подходящий результат.
7. Система открывает соответствующую поездку и переходит к конкретной записи, в которой был найден результат.
   
**Альтернативные потоки (Alternate Flows):**
- **A.Фильтрация поиска:** Пользователь может до или после ввода запроса применить фильтры: «Искать только в названиях мест», «Только в поездках в Италию», «Только фото». Система обновляет результаты согласно фильтрам.
- **B.Поиск по дате:** Пользователь не помнит текст, но помнит примерную дату. Система позволяет искать поездки и записи по временному диапазону без текстового запроса.

---

# Use Case Group 3: Социальное взаимодействие и вдохновение

## Use Case 9: «Опубликовать путешествие / отдельную запись»

### Use Case Description

**Участники (Actors):** Пользователь  
**Цель:** Поделиться дневником путешествия или отдельными записями с другими пользователями или по ссылке

**Предусловия (Preconditions):**
- В приложении создано хотя бы одно путешествие
- Пользователь авторизован
- Приложение имеет доступ к сети Интернет

**Основной поток (Main Success Scenario):**
1. Пользователь открывает путешествие
2. Пользователь нажимает «Поделиться» или «Опубликовать»
3. Система предлагает выбрать формат публикации (весь дневник или отдельные записи)
4. Пользователь выбирает нужный формат
5. Пользователь настраивает параметры доступа (публично, по ссылке, только для друзей)
6. Пользователь подтверждает публикацию
7. Система генерирует ссылку (если требуется) и применяет настройки доступа
8. Система уведомляет о успешной публикации и предлагает способы поделиться ссылкой

**Альтернативные потоки (Alternate Flows):**
- **A. Частичная публикация:** Публикуется только выбранная запись или часть дневника
- **B. Пользователь отменяет публикацию:** При выборе «Отмена» действие прекращается, данные не публикуются

---

## Use Case 10: «Комментировать и реагировать на чужие дневники»

### Use Case Description

**Участники (Actors):** Пользователь  
**Цель:** Взаимодействовать с дневниками других пользователей через лайки и комментарии

**Предусловия (Preconditions):**
- Пользователь авторизован
- Приложение имеет доступ к сети
- Пользователь имеет доступ к ленте публичных дневников или дневников друзей

**Основной поток (Main Success Scenario):**
1. Пользователь открывает ленту публичных путешествий
2. Система отображает список доступных дневников
3. Пользователь выбирает дневник
4. Пользователь нажимает «Лайк» или оставляет комментарий
5. Система публикует реакцию или комментарий
6. Система уведомляет автора дневника о полученной реакции

**Альтернативные потоки (Alternate Flows):**
- **A. Удаление или изменение комментария:** Пользователь может редактировать или удалить свой комментарий, система обновляет информацию
- **B. Дневник недоступен:** При удалённом или скрытом дневнике система сообщает об ошибке доступа

---

## Use Case 11: «Экспортировать путешествие в PDF-отчет»

### Use Case Description

**Участники (Actors):** Пользователь  
**Цель:** Создать красивый PDF-файл с полным или частичным содержимым дневника для офлайн-хранения или отправки другим людям

**Предусловия (Preconditions):**
- В приложении существует хотя бы одно путешествие с данными
- Приложение имеет доступ к файловой системе устройства

**Основной поток (Main Success Scenario):**
1. Пользователь открывает путешествие
2. Пользователь выбирает «Экспорт в PDF»
3. Система предлагает выбрать стиль оформления PDF
4. Пользователь выбирает стиль
5. Пользователь указывает, что включить в документ (весь дневник или отдельные разделы)
6. Пользователь нажимает «Сгенерировать»
7. Система создает PDF-документ
8. Пользователь сохраняет файл на устройство или делится им через доступные приложения

**Альтернативные потоки (Alternate Flows):**
- **A. Недостаточно памяти:** Система уведомляет о нехватке места и предлагает выбрать облегченный формат
- **B. Отмена экспорта:** Пользователь останавливает процесс, система не создает файл


## Use Case 12: «Создать список желаний»

### Use Case Description

**Участники (Actors):** Пользователь  
**Цель:** Собрать список мест, которые пользователь хочет посетить в будущем, черпая вдохновение из чужих путешествий

**Предусловия (Preconditions):**
- Пользователь авторизован
- Приложение имеет доступ к сети Интернет (для подгрузки информации о местах)

**Основной поток (Main Success Scenario):**
1. Пользователь просматривает чужие дневники или раздел вдохновения
2. Пользователь нажимает «Добавить в список желаний» рядом с понравившимся местом
3. Система предлагает выбрать тип места (город, страна, достопримечательность)
4. Пользователь подтверждает добавление
5. Система сохраняет место в списке желаний
6. Пользователь может просматривать свой список, добавлять заметки, сортировать или удалять элементы

**Альтернативные потоки (Alternate Flows):**
- **A. Ручное добавление:** Пользователь напрямую создаёт новую запись в списке желаний, вводя данные вручную
- **B. Место уже добавлено:** Система уведомляет, что место уже есть, и предлагает добавить заметку или обновить существующую информацию

